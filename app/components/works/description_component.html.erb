<section id="description">
  <header>Describe your deposit</header>
  <p>Enter a summary statement about the deposit (600 words max) to help others
    discover your deposits in SearchWorks and on the internet. Add at least one
    keyword that relates to the content of the deposit.</p>

  <div class="mb-3 row">
    <%= form.label :abstract, 'Abstract', class: 'col-sm-2 col-form-label' %>
    <div class="col-sm-10">
      <%= form.text_area :abstract, class: "form-control", required: true %>
      <div class="invalid-feedback">You must provide an abstract</div>
    </div>
  </div>

  <div class="mb-3 row">
    <%= form.label :keywords, 'Keywords', class: 'col-sm-2 col-form-label' %>
    <div class="col-sm-10">
      <%= render Works::KeywordsComponent.new(form: form) %>
    </div>
  </div>

  <div class="mb-3 row">
    <div class="col-sm-12 h5">
      Work types (optional)
    </div>
  </div>

  <div class="mb-5 row">
    <% if other_type? %>
      <%= form.label :subtype, 'Other', class: 'col-sm-2 col-form-label' %>
      <div class="col-sm-10">
        <%= form.text_field :subtype, class: 'form-control', required: true, multiple: true %>
        <div class="invalid-feedback">You must provide a subtype for works of type 'Other'</div>
      </div>
    <% else %>
      <% subtypes.each do |subtype| %>
        <div class="col-sm-4">
          <div class="form-check">
            <%= form.check_box :subtype, { multiple: true, class: 'form-check-input' }, subtype, nil %>
            <%= form.label "subtype_#{sanitized_value(subtype)}", subtype, class: 'form-check-label' %>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>

  <fieldset class="mb-5">
    <legend class='h5'>Citation for this deposit (optional)</legend>

    <p>This is the text that others can use when they want to cite this deposit. We highly recommend that you provide the text of that citation here to make it easier for them to cite your work and give you proper credit.</p>

    <div class="mb-3 row">
      <%= form.label :default_citation, 'Use default citation', class: "form-check-label col-sm-2" %>

      <div class="col-sm-3">
        <div class="form-check form-switch">
          <%= form.check_box :default_citation,
                {
                  data: {
                    action: 'change->auto-citation#switchChanged',
                    auto_citation_target: 'switch'
                  },
                  class: 'form-check-input'
                },
                'true', 'false' %>
        </div>
      </div>
    </div>
    <div class="mb-3 row">
      <div class='col-sm-2'></div>
      <div class="col-sm-10">
        <%= form.text_area :citation, class: "form-control",
                           aria: { label: 'Provided citation' },
                           data: { auto_citation_target: 'manual' } %>
        <%= form.text_area :citation_auto,
                           class: "form-control", disabled: true,
                           aria: { label: 'Automatically generated citation' },
                           data: { auto_citation_target: 'auto' } %>
      </div>
    </div>
  </fieldset>


  <%= render Works::RelatedWorkComponent.new(form: form) %>

  <%= render Works::RelatedLinkComponent.new(form: form) %>

</section>
